// Copyright (C) 2016-Present Pivotal Software, Inc. All rights reserved.

// This program and the accompanying materials are made available under
// the terms of the under the Apache License, Version 2.0 (the "License‚Äù);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at

// http://www.apache.org/licenses/LICENSE-2.0

// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

---
name: deployment-name

releases:
  - name: a-release
    version: latest

stemcells:
  - alias: greatest
    os: Windows
    version: "3.1"

instance_groups:
  - name: jerb
    instances: 1
    jobs:
      - name: broker
        release: a-release
        provides:
          some_link: {as: link-name}
        consumes:
          another_link: {from: jerb-link}
          nullified_link: nil
        properties:
          some_property: some_value
    vm_type: massive
    persistent_disk_type: big
    azs: [az1, az2]
    stemcell: greatest
    networks:
      - name: a-network
        static_ips: [10.0.0.0]

  - name: an-errand
    lifecycle: errand
    instances: 1
    jobs: [{name: a-release, release: a-release}]
    vm_type: small
    stemcell: greatest
    networks: [{name: a-network}]

properties:
  foo: bar

update:
  canaries: 1
  canary_watch_time: 30000-180000
  update_watch_time: 30000-180000
  max_in_flight: 4
  serial: false
